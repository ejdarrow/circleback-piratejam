<html>
<head>
<style> 
.container {
    height: 300;
    width: 300;
    position: absolute;
    top: 50%;
    left: 50%;
    margin: -150px 0 0 -150px;
}
.ringedge { /* background-color: black; */
    background-color: white;
    border-radius: 50%;
    height: 95%;
    width: 95%;
    align:center;
    position:relative;
}
.ring {
    background-color: black;
    border-radius: 50%;
    height: 95%;
    width:95%;
    align:center;
    position:relative;

}
</style>


</head>
<body>

<b>Content</b>

<div id='winmessage'></div>
<div class="container">
<div class="ring" curval=1 targetval=5 right=false ringnumber='1' id='ring_1'>
<div class="ringedge">
</div>
</div>
<div id='target'>5,7,9</div>
<div id='statedisplay_1'></div>
<br/>

<div class=ring curval=1 targetval=7 right=false ringnumber='2' id='ring_2'>7</div>
</div>
<script>

function clamp(element) {
    element.setAttribute('curval', parseInt(element.getAttribute('curval')));
    document.getElementById('statedisplay_' +element.getAttribute('ringnumber')).innerHTML = element.getAttribute('curval');
}
function check(element) {
    let target = element.getAttribute('targetval');
    let curval = element.getAttribute('curval');
    if(curval === target) {
        element.style.color = 'green';
        element.style.backgroundColor = 'green';
        element.setAttribute('right',true);
    } else {
        element.style.color = 'black';
        element.style.backgroundColor = 'black';
        element.setAttribute('right',false);
    }

}
function checkAll() {
    let isWin = true;
    for(var i = 1; i<=activeRings; i++) {
        isWin = isWin && ('true' === document.getElementById('ring_' + i).getAttribute('right'));
    }
    if(isWin) {
        document.getElementById('winmessage').innerHTML = "You win!";
    } 
}

function slide(event) {
    //rate = parseDouble(document.getElementById('rate').innerHTML);
    event.preventDefault();
    let newVal = parseInt(event.target.getAttribute('curval')) + event.deltaY * rate;
    event.target.setAttribute('curval', newVal);
    
    var currentTimeoutId = event.target.getAttribute('clampTimeoutId');
    if(currentTimeoutId) {
        clearTimeout(currentTimeoutId);
    }
    let timeoutId = setTimeout(function() {
        clamp(event.target);
        check(event.target);
        event.target.setAttribute('clampTimeoutId', '');
        checkAll();
    }, 1000);
    event.target.setAttribute('clampTimeoutId', timeoutId);
}


let rate = 0.01;
let activeRings = 2;

document.getElementById('ring_1').onwheel = slide;
document.getElementById('ring_2').onwheel = slide;
</script>
</body>
</html>
