<html>
<head>
<style> 
:root {
    --gold: #FFD700;
    --blood: #880808;
    --wood: #867342;
    --marble: #FFFCF0;
    --ebony: #555D50;
    --container-height: 600px;
    --container-width: 600px;
    --radial-difference: 50px;
    --radial-difference-half: calc(var(--radial-difference) / 2);
}

.container {
    height: var(--container-height);
    width: var(--container-width);
    position: absolute;
}
.ring-inner { /* background-color: black; */
    background-color: var(--gold);
    border-radius: 50%;
    position: relative;
    margin: var(--radial-difference-half); 
}
.ring {
    background-color: var(--ebony);
    border-radius: 50%;
    position: absolute;
    margin: var(--radial-difference-half);
}
.ring-one {
    height: calc(var(--container-height) - var(--radial-difference));
    width: calc(var(--container-width) - var(--radial-difference));
}

.ring-inner-one {
    height: calc(var(--container-height) - calc( 2 * var(--radial-difference)));
    width: calc(var(--container-width) - calc( 2 * var(--radial-difference)));
}
.ring-two {
    height: calc(var(--container-height) - calc( 3 * var(--radial-difference)));
    width:  calc(var(--container-width) - calc( 3 * var(--radial-difference)));

}
.ring-inner-two {
    height:  calc(var(--container-height) - calc( 4 * var(--radial-difference)));
    width:  calc(var(--container-height) - calc( 4 * var(--radial-difference)));
}
.ring-three {
    height: calc(var(--container-height) - calc( 5 * var(--radial-difference)));
    width:  calc(var(--container-width) - calc( 5 * var(--radial-difference)));

}
.ring-inner-three {
    height:  calc(var(--container-height) - calc( 6 * var(--radial-difference)));
    width:  calc(var(--container-height) - calc( 6 * var(--radial-difference)));
}
.ring-four {
    height: calc(var(--container-height) - calc( 7 * var(--radial-difference)));
    width:  calc(var(--container-width) - calc( 7 * var(--radial-difference)));

}
.ring-inner-four {
    height:  calc(var(--container-height) - calc( 8 * var(--radial-difference)));
    width:  calc(var(--container-height) - calc( 8 * var(--radial-difference)));
}
.ring-five {
    height: calc(var(--container-height) - calc( 9 * var(--radial-difference)));
    width:  calc(var(--container-width) - calc( 9 * var(--radial-difference)));

}
.ring-inner-five {
    height:  calc(var(--container-height) - calc( 10 * var(--radial-difference)));
    width:  calc(var(--container-height) - calc( 10 * var(--radial-difference)));
}

</style>


</head>
<body>

<b>Content</b>
<div id='winmessage'></div>
<div class="container">
<div class="ring ring-one" curval=1 targetval=5 right=false ringnumber='1' id='ring_1'>
<div class="ring-inner ring-inner-one" id='ring-inner_1'>
<div class="ring ring-two" id='ring_2'>
<div class="ring-inner ring-inner-two">
<div class="ring ring-three">
<div class="ring-inner ring-inner-three">
<div class="ring ring-four">
<div class="ring-inner ring-inner-four">
<div class="ring ring-five">
<div class="ring-inner ring-inner-five">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id='target'>5,7,9</div>
<div id='statedisplay_1'></div>
<br/>
<div class=ringnot curval=1 targetval=7 right=false ringnumber='2' id='ring_2'>7</div>
</div>
<script>

function clamp(element) {
    element.setAttribute('curval', parseInt(element.getAttribute('curval')));
    document.getElementById('statedisplay_' +element.getAttribute('ringnumber')).innerHTML = element.getAttribute('curval');
}
function check(element) {
    let target = element.getAttribute('targetval');
    let curval = element.getAttribute('curval');
    if(curval === target) {
        element.style.color = 'green';
        element.style.backgroundColor = 'green';
        element.setAttribute('right',true);
    } else {
        element.style.color = 'black';
        element.style.backgroundColor = 'black';
        element.setAttribute('right',false);
    }

}
function checkAll() {
    let isWin = true;
    for(var i = 1; i<=activeRings; i++) {
        isWin = isWin && ('true' === document.getElementById('ring_' + i).getAttribute('right'));
    }
    if(isWin) {
        document.getElementById('winmessage').innerHTML = "You win!";
    } 
}

function slide(event) {
    //rate = parseDouble(document.getElementById('rate').innerHTML);
    event.preventDefault();
    let newVal = parseInt(event.target.getAttribute('curval')) + event.deltaY * rate;
    event.target.setAttribute('curval', newVal);
    
    var currentTimeoutId = event.target.getAttribute('clampTimeoutId');
    if(currentTimeoutId) {
        clearTimeout(currentTimeoutId);
    }
    let timeoutId = setTimeout(function() {
        clamp(event.target);
        check(event.target);
        event.target.setAttribute('clampTimeoutId', '');
        checkAll();
    }, 1000);
    event.target.setAttribute('clampTimeoutId', timeoutId);
}


let rate = 0.01;
let activeRings = 2;

document.getElementById('ring_1').onwheel = slide;
document.getElementById('ring_2').onwheel = slide;
</script>
</body>
</html>
