<html>
<head>
<style>
:root {
    --gold: #FFD700;
    --blood: #880808;
    --wood: #867342;
    --marble: #FFFCF0;
    --ebony: #555D50;
    --container-height: 1000px;
    --container-width: 1000px;
    --radial-difference: 95px;
    --radial-difference-half: calc(var(--radial-difference) / 2);
    --top-base: 0px;
    --left-base: 0px;
}
.menu-container {
    align-content: center;
    background-color:white;
        height: var(--container-height);
        width: var(--container-width);
        position: absolute;
        top: var(--top-base);
        left:var(--left-base);
}


.container {
    height: var(--container-height);
    width: var(--container-width);
    position: absolute;
    top: var(--top-base);
    left:var(--left-base);
}
.ring-inner { /* background-color: black; */
    background-color: var(--blood);
    border-radius: 50%;
    position: absolute;
    margin: var(--radial-difference-half);
    top: var(--top-base);
    left: var(--left-base);

}
.ring {
    background-color: black;
    border-radius: 50%;
    position: absolute;
    margin: var(--radial-difference-half);
    top: var(--top-base);
    left: var(--left-base);
}
.ring-one {
    height: calc(var(--container-height) - var(--radial-difference));
    width: calc(var(--container-width) - var(--radial-difference));
}

.ring-inner-one {
    height: calc(var(--container-height) - calc( 2 * var(--radial-difference)));
    width: calc(var(--container-width) - calc( 2 * var(--radial-difference)));
}
.ring-two {
    height: calc(var(--container-height) - calc( 3 * var(--radial-difference)));
    width:  calc(var(--container-width) - calc( 3 * var(--radial-difference)));

}
.ring-inner-two {
    height:  calc(var(--container-height) - calc( 4 * var(--radial-difference)));
    width:  calc(var(--container-height) - calc( 4 * var(--radial-difference)));
}
.ring-three {
    height: calc(var(--container-height) - calc( 5 * var(--radial-difference)));
    width:  calc(var(--container-width) - calc( 5 * var(--radial-difference)));

}
.ring-inner-three {
    height:  calc(var(--container-height) - calc( 6 * var(--radial-difference)));
    width:  calc(var(--container-height) - calc( 6 * var(--radial-difference)));
}
.ring-four {
    height: calc(var(--container-height) - calc( 7 * var(--radial-difference)));
    width:  calc(var(--container-width) - calc( 7 * var(--radial-difference)));

}
.ring-inner-four {
    height:  calc(var(--container-height) - calc( 8 * var(--radial-difference)));
    width:  calc(var(--container-height) - calc( 8 * var(--radial-difference)));
}


</style>


</head>
<body style="background-color:gray;">
<div id='menuHolder' class="menu-container">
  <h1> Welcome to Circle Back</h1>
  <button> Play </button>
  <h3> How to Play </h3>
</div>



<div id='gameHolder' class="container" hidden>
<b>Content</b>
<div id='gamestate'></div>
<div id='winmessage'></div>
<div id='ring_1' class="ring ring-one" curval=8 targetval=5 right=false ringnumber='1' >
<img id="ring_1~graphic" src="assets/8.svg"/>
<div id='ring_1~guide' class="ring-inner ring-inner-one" >
<img id="ring_1~guide_graphic" src="assets/5g.svg"/>
<div id='ring_2' class="ring ring-two" curval=8 targetval=5 right=false ringnumber='2' >
<img id="ring_2~graphic" src="assets/8.svg"/>
<div id='ring_2~guide' class="ring-inner ring-inner-two" >
<img id="ring_2~guide_graphic" src="assets/8g.svg"/>
<div id='ring_3' class="ring ring-three" curval=8 targetval=5 right=false  ringnumber='3' >
<img id="ring_3~graphic" src="assets/8.svg"/>
<div id='ring_3~guide' class="ring-inner ring-inner-three" >
<img id="ring_3~guide_graphic" src="assets/8g.svg"/>
<div id='ring_4' class="ring ring-four" curval=8 targetval=5 right=false ringnumber='4' >
<img id="ring_4~graphic" src="assets/8.svg"/>
<div id='ring_4~guide' class="ring-inner ring-inner-four" >
<img id="ring_4~guide_graphic" src="assets/8g.svg"/>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<br/>
<script>


function check(element) {
    let target = element.getAttribute('targetval');
    let curval = element.getAttribute('curval');
    if(curval === target) {
        element.style.color = 'green';
        element.style.backgroundColor = 'green';
        element.setAttribute('right',true);
    } else {
        element.style.color = 'black';
        element.style.backgroundColor = 'black';
        element.setAttribute('right',false);
    }

}
function makeBetweenTwoAndSixteen(val) {
  return parseInt(Math.min(16, Math.max(val,2)));
}

function checkAll() {
    let isWin = true;
    for(var i = 1; i<=activeRings; i++) {
        isWin = isWin && ('true' === document.getElementById('ring_' + i).getAttribute('right'));
    }
    if(isWin) {
        document.getElementById('winmessage').innerHTML = "You win!";
    }
}

function slide(event) {
    //rate = parseDouble(document.getElementById('rate').innerHTML);
    event.preventDefault();
    let target = event.target;
    if(event.target.id.includes('~')) {
      target = document.getElementById(event.target.id.split('~')[0]);
    }
    if(!target.getAttribute("right").endsWith("true")){
      let newVal = makeBetweenTwoAndSixteen(parseInt(target.getAttribute('curval')) + event.deltaY * rate);
      target.setAttribute("curval", newVal);
      let ringNumber = target.getAttribute('ringnumber');
      let image = document.getElementById("ring_" + ringNumber + "~graphic");
      image.src ="assets/" + newVal + ".svg";
    }

    var currentTimeoutId = target.getAttribute('clampTimeoutId');
    if(currentTimeoutId) {
        clearTimeout(currentTimeoutId);
    }
    let timeoutId = setTimeout(function() {
        check(target);
        target.setAttribute('checkTimeoutId', '');
        checkAll();
    }, 750);
    target.setAttribute('checkTimeoutId', timeoutId);
}


let rate = 0.05;
let activeRings = 4;

document.getElementById('ring_1').onwheel = slide;



</script>
</body>
</html>
